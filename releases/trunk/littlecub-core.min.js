/*! littlecub 2013-12-31
Copyright 2014 NextFrontier Technologies Inc. Licensed under the Apache 2 license.
 https://github.com/drq/littlecub/blob/master/license.txt */var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),function(){"use strict";var a=function(c,d,e,f){e=e||{},d=d||{},e.type=b.schemaType(e,d,c),d.type=b.controlType(e,d,c);var g=a.controlClass(d.type);g||(d.type="text",g=a.controlClass(d.type));var h=new g(c,d,e);return h.init(),f&&h.render(f),h};_.extend(a,{version:"0.1.0",defaults:{locale:"en_US",theme:"default",templateEngine:"handlebars",validationEvent:"blur",schemaToControl:{string:"text","boolean":"checkbox",number:"number",integer:"integer",array:"array",object:"object"},formatToControl:{"date-time":"datetime",email:"email",hostname:"hostname",ipv4:"ipv4",ipv6:"ipv6",uri:"uri"}},themes:{},templates:{},logger:{DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},id:function(){var a=0;return function(){return a++,"lc-"+a}}(),typeControlClass:function(){var a={};return function(){var b=arguments.length;return 1===b?a[arguments[0]]:2===b&&_.isString(arguments[0])&&!_.isNull(arguments[0])?(a[arguments[0]]=arguments[1],arguments[1]):void 0}}(),formatControlClass:function(){var a={};return function(){var b=arguments.length;return 1===b?a[arguments[0]]:2===b&&_.isString(arguments[0])&&!_.isNull(arguments[0])?(a[arguments[0]]=arguments[1],arguments[1]):void 0}}(),controlClass:function(){var a={};return function(){var b=arguments.length;if(1===b)return a[arguments[0]];if(2===b){if(_.isString(arguments[0])&&!_.isNull(arguments[0]))return a[arguments[0]]=arguments[1],arguments[1]}else if(0===b)return _.clone(a)}}(),log:function(b,c){a.logger.log(b,c)},cloneJSON:function(a){return JSON.parse(JSON.stringify(a))},prettyTitle:function(a){return a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1)}):""},isEmpty:function(a){return _.isNull(a)||_.isUndefined(a)},isValEmpty:function(b){return a.isEmpty(b)?!0:_.isString(b)&&""==b?!0:_.isObject(b)&&_.isEmpty(b)?!0:_.isArray(b)&&0==b.length?!0:_.isNumber(b)&&_.isNaN(b)?!0:!1},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},startsWith:function(a,b){return a.substr(0,b.length)===b},replaceTokens:function(b,c){if(!a.isEmpty(b))for(var d=0,e=c.length;e>d;d++){var f="{"+d+"}",g=b.indexOf(f);if(-1!=g){var h=b.substring(0,g)+c[d]+b.substring(g+f.length);b=h}}return b},compare:function(a,b){if(_.isObject(a)&&_.isObject(b))return _.isEqual(a,b);if(_.isArray(a)&&_.isArray(b)){if(a.length!=b.length)return!1;for(var c=!0,d=0,e=a.length;e>d&&c;d++)for(var f=0,g=b.length;g>f&&c;f++)c=this.compare(a[d],b[f]);return c}return a==b},regExp:function(a){var b=a.replace(/.*\/([gimy]*)$/,"$1"),c=a.replace(new RegExp("^/(.*?)/"+b+"$"),"$1");return new RegExp(c,b)},hasClass:function(a,c){var d=b.regExp("/(?:^|\\s)"+c+"(?!\\S)/");return a.className.match(d)},addClass:function(a,c){b.hasClass(a,c)||(a.className+=" "+c)},removeClass:function(a,c){if(b.hasClass(a,c)){var d=b.regExp("/(?:^|\\s)"+c+"(?!\\S)/g");a.className=a.className.replace(d,"")}},registerTheme:function(b,c){c=c||b.id,c&&(a.themes[c]=b)},findThemeConfig:function(b,c){for(var d=a.themes[c],e=d[b],f=d.parent;!e&&f;)d=a.themes[f],e=d[b],f=d.parent;return e},findMessage:function(b,c,d){var e=a.themes[c];d=d||a.defaults.locale;for(var f=e.messages&&e.messages[d]?e.messages[d][b]:null,g=e.parent;!f&&g;)e=a.themes[g],f=e.messages&&e.messages[d]?e.messages[d][b]:null,g=e.parent;return f?f:d!=a.defaults.locale?this.findMessage(b,c,a.defaults.locale):void 0},findTemplate:function(c,d){for(var e=c+"__"+d,f=Handlebars.partials[e]||a.templates[e],g=a.themes[c],h=g.parent;!f&&h;)e=h+"__"+d,f=Handlebars.partials[e]||a.templates[e],h=g.parent,g=b.themes[h];return f},renderTemplate:function(b,c,d){if(a.defaults&&"handlebars"==a.defaults.templateEngine&&Handlebars){var e=this.findTemplate(b,c)||Handlebars.compile(e);return e(d).trim()}},registerTemplate:function(b,c,d){a.defaults&&"handlebars"==a.defaults.templateEngine&&Handlebars&&(d?a.templates[b]=Handlebars.compile(c):Handlebars.registerPartial(b,Handlebars.compile(c)))},loadThemes:function(b,c){var d=_.size(b),e=0,f="<script",g="</script>";_.each(b,function(b,h){var i=new XMLHttpRequest;i.open("GET",b,!0),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var b=this.responseText,i=0,j=0;-1!=i&&-1!=j;)if(i=b.indexOf(f,i),-1!=i&&(j=b.indexOf(g,i),-1!=j)){var k=b.indexOf(">",i);if(-1!=k){var l=b.substring(i+f.length,k),m=l.match(/id(\s*)=(\s*)(.*?)['"]+(.*?)['"]+/);if(null!=m){var n=m[m.length-1],o=n.split(",");_.each(o,function(c){var d=c.trim();if(d){var e=0==d.indexOf("template-");e&&(d=d.substring(9));var f=b.substring(k+1,j);a.registerTemplate(h+"__"+d,f.trim(),e)}})}}i=j+g.length}e++,e==d&&c&&c()}},i.send()})},schemaType:function(b,c,d){var b=b||this.schema,c=c||this.configs,d=d||this.data;return b.type?b.type:c.type&&(_.every(a.defaults.schemaToControl,function(a,d){return a===c.type?b.type=d:!0}),b.type)?b.type:_.isNull(d)||_.isUndefined(d)?"string":_.isArray(d)?"array":_.isObject(d)?"object":_.isString(d)?"string":_.isNumber(d)?"number":_.isBoolean(d)?"boolean":"string"},controlType:function(b,c){var b=b||this.schema,c=c||this.configs;return c.type?c.type:b.type&&b["enum"]?b["enum"].length>3?"select":"radio":b.format&&a.defaults.formatToControl[b.format]?a.defaults.formatToControl[b.format]:a.defaults.schemaToControl[b.type]||"text"}});var b=a;if(Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"undefined"!=typeof jQuery&&($.littlecub=$.lc=a,$.fn.littlecub=$.fn.lc=function(){for(var b=[],c=0;c<this.length;c++){for(var d=_.toArray(arguments);d.length<3;)d.push(null);d.push(this[c]),b.push(a.apply(this,d))}return 1==b.length?b[0]:b}),"undefined"!=typeof module&&module.exports)module.exports=a;else if("function"==typeof define&&define.amd)define("littlecub",[],function(){return a});else{var c=function(){return this||(0,eval)("this")};c().LittleCub=c().LC=a}}(),function(){"use strict";LittleCub.registerTheme({id:"base",title:"Base Theme",description:"Base theme for extending.",templateEngine:"handlebars",platform:["web"],messages:{en_US:{required:"Required field.",pattern:"This field should have pattern {0}.",minLength:"This field should contain at least {0} numbers or characters.",maxLength:"This field should contain at most {0} numbers or characters.",minimum:"The minimum value for this field is {0}.",maximum:"The maximum value for this field is {0}.",exclusiveMinimum:"Value of this field must be greater than {0}.",exclusiveMaximum:"Value of this field must be less than {0}.",multipleOf:"The value must be multiple of {0}.",isNumber:"Field value must be a number.",isInteger:"Field value must be an integer.",minItems:"The minimum number of items is {0}.",maxItems:"The maximum number of items is {0}.",uniqueItems:"Array items are not unique.",invalidEmail:"Invalid email address.",invalidHostname:"Invalid hostname.",invalidIpv4:"Invalid ip address (v4).",invalidIpv6:"Invalid ip address (v6).",isDatetime:"Field value must be a date-time.",isUri:"Field value must be a uri."}}})}(),function(){"use strict";Handlebars.registerHelper("key_value",function(a,b){b||(b=a,a=this);var c="";for(var d in a)a.hasOwnProperty(d)&&(c+=b.fn({key:d,value:a[d]}));return c}),Handlebars.registerHelper("each_with_key",function(a,b){var c,d="",e=b.hash.key;for(var f in a)a.hasOwnProperty(f)&&(c=a[f],e&&(c[e]=f),d+=b.fn(c));return d}),Handlebars.registerHelper("object_with_key",function(a,b){var c=b.hash.key;return a.hasOwnProperty(c)?b.fn(a[c]):""}),Handlebars.registerHelper("include",function(a){var b=this.value||this,c=b.theme,d=LittleCub.findTemplate(c,a);return d?new Handlebars.SafeString(d(b)):""}),Handlebars.registerHelper("injectControl",function(){var a=this.theme,b=this.template||"control_"+this.type,c=LittleCub.findTemplate(a,b);return!c&&this.altTemplate&&(c=LittleCub.findTemplate(a,this.altTemplate)),c?new Handlebars.SafeString(c(this)):""}),Handlebars.registerHelper("isContainer",function(a){return this.isContainer?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("isType",function(a,b){return a=a.split(" "),-1!=_.indexOf(a,this.type)?b.fn(this):b.inverse(this)})}(),function(){"use strict";LittleCub.BaseControl=Base.extend({constructor:function(a,b,c){this.data=a,this.dataBackup=_.isObject(a)||_.isArray(a)?LC.cloneJSON(a):a,this.configs=b||{},this.schema=c||{},this.constructor.SCHEMA&&(this.schema=_.extend(this.schema,LC.cloneJSON(this.constructor.SCHEMA))),this.constructor.CONFIGS&&(this.configs=_.extend(this.configs,LC.cloneJSON(this.constructor.CONFIGS))),this.id=this.configs.id||LC.id(),this.path=this.configs.path||"/",this.parent=null,this.field=null,this.validation={}},init:function(){if(this.schema.$ref){var a=this.schema.$ref.split("/");if("#"==a[0]){for(var b=this;b.parent;)b=b.parent;for(var c=b.schema,d=1;d<a.length&&c;d++)c=c[a[d]];c&&(this.schema=_.extend(this.schema,LC.cloneJSON(c)),delete this.schema.$ref)}}this.schema.type=LC.schemaType.call(this),this.configs.type=LC.controlType.call(this),this.configs.label=LC.isEmpty(this.configs.label)?this.schema.title:this.configs.label,LC.isEmpty(this.configs.label)&&this.parent&&"array"!=this.parent.schema.type&&(this.configs.label=LC.prettyTitle(this.key)||""),this.schema.title=LC.isEmpty(this.schema.title)?this.configs.label:this.schema.title,this.configs.helper=LC.isEmpty(this.configs.helper)?this.schema.description:this.configs.helper,this.schema.description=LC.isEmpty(this.schema.description)?this.configs.helper:this.schema.description,this.configs.name=this.configs.name||this.path.substring(1).replace(/\//g,"_"),this.configs.theme=this.configs.theme||LittleCub.defaults.theme,this.configs.id=this.id,this.configs.data=this.configs.data||this.data,LC.isValEmpty(this.configs.data)&&!LC.isEmpty(this.schema["default"])&&(this.configs.data=this.schema["default"]),this.data=this.data||this.configs.data},bindData:function(a){this.data=a,this.configs.data=this.data},isValid:function(a){return a||this.validate(),_.every(this.validation,function(a){return a.status})},_validateRequired:function(){var a={status:!(this.configs.required&&LC.isValEmpty(this.val()))};return a.status||(a.message=LC.findMessage("required",this.configs.theme)),a},validate:function(){this.validation.required=this._validateRequired();var a=LC.findTemplate(this.configs.theme,"control_messages"),b=LC.findThemeConfig("errorInjection",this.configs.theme),c=LC.findThemeConfig("errorClass",this.configs.theme);if(a&&this.messagesContainer){this.messagesContainer.innerHTML=a({validation:this.validation}).trim();var d=_.every(this.validation,function(a){return a.status});_.isFunction(b)?b.call(this,d):c&&(d?(LC.removeClass(this.field||this.outerEl,c),LC.removeClass(this.messagesContainer,c)):(LC.addClass(this.field||this.outerEl,c),LC.addClass(this.messagesContainer,c)))}return this},validationEvent:function(){return this.configs.validationEvent||LittleCub.defaults.validationEvent},bindCustomEventHandlers:function(){var a=this;_.each(this.configs,function(b,c){if(LC.startsWith(c,"onControl")&&_.isFunction(b)){var d=c.substring(9).toLowerCase();a.field.addEventListener(d,function(c){b.call(a,c)},!1)}})},bindEventListeners:function(){if(this.field){var a=this.validationEvent();this.field.addEventListener(a,this.validate.bind(this),!1);var b=this;this.field.addEventListener("change",function(){var a=document.createEvent("Events");a.initEvent("lc-update",!0,!0),a["lc-control"]=b,b.field.dispatchEvent(a)},!1),this.bindCustomEventHandlers()}},controlByPath:function(a){var b=this;if(a){for(var c=_.compact(a.split(/[\[\]\/]/)),d=0;d<c.length;d++){if(LC.isValEmpty(c[d]))return null;if(!b||!b.children)return null;if(!b.children[c[d]])return null;b=b.children[c[d]]}return b}},val:function(){},bindDOM:function(){for(var a=this.container,b=this.parent;!a&&b;)a=b.container,b=b.parent;a&&(this.outerEl=a.querySelector("[data-lcid="+this.id+"]"),this.field=a.querySelector("[data-lcid="+this.id+"-field]"),this.messagesContainer=a.querySelector("[data-lcid="+this.id+"-messages]"),this.bindEventListeners(),LC.isEmpty(this.configs.form)||(this.form=a.querySelector("form[data-lcid="+this.id+"-form]")),this.configs.hidden&&this.outerEl&&(this.outerEl.style.display="none"))},render:function(a,b,c){c=c||"fill",a&&(this.container=a);var d=this.configs.theme,e=this.configs.template?this.configs.template:"form";if(LC.isEmpty(b)||this.bindData(b),"fill"==c)a.innerHTML=LC.renderTemplate(d,e,this.configs);else if("insertAfter"==c){var f=document.createElement("span");f.innerHTML=LC.renderTemplate(d,e,this.configs),a.parentNode.insertBefore(f.firstChild,a.nextSibling),this.container=this.container.parentNode}this.bindDOM();var g=LC.findThemeConfig("injection",d);g&&_.isFunction(g)&&g.call(this,a)}})}(),function(){"use strict";LittleCub.ContainerControl=LittleCub.BaseControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.isContainer=!0},updateKeyPath:function(){var a=this;_.each(this.children,function(b,c){var d=b.configs.name==b.path.substring(1).replace(/\//g,"_");if(a._updateKeyPath(b,c),d){var e=b.configs.name;b.configs.name=b.path.substring(1).replace(/\//g,"_"),b.outerEl&&(b.outerEl.getAttribute("name")==e&&b.outerEl.setAttribute("name",b.configs.name),_.each(b.outerEl.querySelectorAll("[name='"+e+"']"),function(a){a.setAttribute("name",b.configs.name)}),_.each(b.outerEl.querySelectorAll("[for='"+e+"']"),function(a){a.setAttribute("for",b.configs.name)}))}b.updateKeyPath&&b.updateKeyPath()})},bindDOM:function(){this.base(),_.each(this.children,function(a){a.bindDOM()})},isValid:function(a){var b=this.base(a);return b?_.every(this.children,function(b){return b.isValid(a)}):!1},validate:function(a){return a&&_.each(this.children,function(b){b.validate(a)}),this.base()}})}(),function(){"use strict";LittleCub.ObjectControl=LittleCub.ContainerControl.extend({constructor:function(a,b,c){this.base(a,b,c),this.children={}},init:function(){this.base();var a=this.configs,b=this.schema,c=this.data,d=this,e={};b&&b.properties&&_.each(b.properties,function(a,b){e[b]=e[b]||{},e[b].schema=a}),a&&a.controls&&_.each(a.controls,function(a,b){e[b]=e[b]||{},e[b].configs=a}),_.isObject(c)&&_.each(c,function(a,b){e[b]=e[b]||{},e[b].data=a}),_.each(e,function(c,e){c.schema=c.schema||{},c.configs=c.configs||{},c.schema.type=LC.schemaType.call(d,c.schema,c.configs,c.data),c.configs.type=LC.controlType.call(d,c.schema,c.configs),c.configs.theme=c.configs.theme||d.configs.theme;var f=LittleCub.controlClass(c.configs.type);d.schema.required&&-1!=_.indexOf(d.schema.required,e)&&(c.configs.required=!0),d.children[e]=new f(c.data,LC.cloneJSON(c.configs),LC.cloneJSON(c.schema)),d.children[e].parent=d,d.children[e].key=e,d.children[e].path="/"==d.path?d.path+e:d.path+"/"+e,d.children[e].init(),b.properties=b.properties||{},b.properties[e]=d.children[e].schema,a.controls=a.controls||{},a.controls[e]=d.children[e].configs});var f={};_.each(e,function(b,c){f[c]=a.controls[c]}),a.controls=f},_updateKeyPath:function(a,b){if(a.parent){var c=a.parent.path;a.path="/"==c?c+b:c+"/"+b}else a.path=b},val:function(){var a=arguments.length;if(0==a){var b={};return _.each(this.children,function(a){b[a.key]=a.val()}),b}if(1==a){var b=arguments[0];return _.each(this.children,function(a){var c=LC.isEmpty(b)?null:b[a.key];a.val(c)}),b}},bindData:function(a){this.base(a),_.each(this.children,function(b,c){var d=LC.isEmpty(a)?null:a[c];b.bindData(d)})},validate:function(a){return this.base(a)}},{TYPE:"object"}),LittleCub.controlClass(LittleCub.ObjectControl.TYPE,LittleCub.ObjectControl)}(),function(){"use strict";LittleCub.TextControl=LittleCub.BaseControl.extend({constructor:function(a,b,c){this.base(a,b,c)},val:function(){if(this.field){var a=arguments.length;if(0==a)return this.field.value;if(1==a)return this.field.value=arguments[0]||"",this.field.value}},_validatePattern:function(){var a,b=this.val();this.schema.pattern&&(a=LC.regExp(this.schema.pattern));var c={status:LC.isEmpty(this.schema.pattern)||LC.isValEmpty(b)||!LC.isEmpty(b.match(a))};return c.status||(c.message=LC.replaceTokens(LC.findMessage("pattern",this.configs.theme),[this.schema.pattern])),c},_validateMinLength:function(){var a=this.val(),b={status:LC.isEmpty(this.schema.minLength)||LC.isValEmpty(a)||a.length>=this.schema.minLength};return b.status||(b.message=LC.replaceTokens(LC.findMessage("minLength",this.configs.theme),[this.schema.minLength])),b},_validateMaxLength:function(){var a=this.val(),b={status:LC.isEmpty(this.schema.maxLength)||LC.isValEmpty(a)||a.length<=this.schema.maxLength};return b.status||(b.message=LC.replaceTokens(LC.findMessage("maxLength",this.configs.theme),[this.schema.maxLength])),b},validate:function(){return this.validation.pattern=this._validatePattern(),this.validation.minLength=this._validateMinLength(),this.validation.maxLength=this._validateMaxLength(),this.base()}},{TYPE:"text"}),LittleCub.controlClass(LittleCub.TextControl.TYPE,LittleCub.TextControl)}(),function(){"use strict";LittleCub.TextareaControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)}},{TYPE:"textarea"}),LittleCub.controlClass(LittleCub.TextareaControl.TYPE,LittleCub.TextareaControl)}(),function(){"use strict";LittleCub.NumberControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},val:function(){if(this.field){var a=arguments.length;if(0==a)return""==this.field.value?null:parseFloat(this.field.value);if(1==a)return this.field.value=arguments[0]||"",this.field.value}},init:function(){this.base(),this.configs.altTemplate="control_text"},_validateNumber:function(){var a=this.val(),b={status:LC.isValEmpty(this.field.value)||!_.isNaN(a)&&null!=this.field.value.match(/^([\+\-]?((([0-9]+(\.)?)|([0-9]*\.[0-9]+))([eE][+-]?[0-9]+)?))$/)};return b.status||(b.message=LC.findMessage("isNumber",this.configs.theme)),b},_validateMaximum:function(){var a=this.val(),b=!0;LC.isEmpty(this.schema.maximum)||(a>this.schema.maximum&&(b=!1),this.schema.exclusiveMaximum&&a==this.schema.maximum&&(b=!1));var c={status:b};return b||(c.message=this.schema.exclusiveMaximum?LC.replaceTokens(LC.findMessage("exclusiveMinimum",this.configs.theme),[this.schema.maximum]):LC.replaceTokens(LC.findMessage("maximum",this.configs.theme),[this.schema.maximum])),c},_validateMinimum:function(){var a=this.val(),b=!0;LC.isEmpty(this.schema.minimum)||(a<this.schema.minimum?b=!1:this.schema.exclusiveMinimum&&a==this.schema.minimum&&(b=!1));var c={status:b};return b||(c.message=this.schema.exclusiveMinimum?LC.replaceTokens(LC.findMessage("exclusiveMinimum",this.configs.theme),[this.schema.minimum]):LC.replaceTokens(LC.findMessage("minimum",this.configs.theme),[this.schema.minimum])),c},validate:function(){return(!LC.isValEmpty(this.field.value)||this.configs.required)&&(this.validation.isNumber=this._validateNumber(),this.validation.isNumber.status&&(this.validation.maximum=this._validateMaximum(),this.validation.minimum=this._validateMinimum())),this.base()}},{TYPE:"number"}),LittleCub.controlClass(LittleCub.NumberControl.TYPE,LittleCub.NumberControl)}(),function(){"use strict";LittleCub.IntegerControl=LittleCub.NumberControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},val:function(){if(this.field){var a=arguments.length;if(0==a)return""==this.field.value?null:parseInt(this.field.value);if(1==a)return this.field.value=arguments[0]||"",this.field.value}},_validateInteger:function(){var a=this.val(),b={status:LC.isValEmpty(this.field.value)||!_.isNaN(a)&&null!=this.field.value.match(/^([\+\-]?([1-9]\d*)|0)$/)&&a==parseFloat(this.field.value)};return b.status||(b.message=LC.findMessage("isInteger",this.configs.theme)),b},_validateMultipleOf:function(){var a=this.val(),b={status:LC.isEmpty(this.schema.multipleOf)||a%this.schema.multipleOf==0};return b.status||(b.message=LC.replaceTokens(LC.findMessage("multipleOf",this.configs.theme),[this.schema.multipleOf])),b},validate:function(){return(!LC.isValEmpty(this.field.value)||this.configs.required)&&(this.validation.isInteger=this._validateInteger(),this.validation.isInteger.status&&(this.validation.multipleOf=this._validateMultipleOf())),this.base()}},{TYPE:"integer"}),LittleCub.controlClass(LittleCub.IntegerControl.TYPE,LittleCub.IntegerControl)}(),function(){"use strict";LittleCub.CheckboxControl=LittleCub.BaseControl.extend({constructor:function(a,b,c){this.base(a,b,c)},val:function(){if(this.field){var a=arguments.length;if(0==a)return this.field.checked?!0:!1;if(1==a){var b=arguments[0];return this.field.checked=LC.isEmpty(b)?!1:_.isString(b)?"true"===b:_.isBoolean(b)?b:!1,this.field.checked}}},bindDOM:function(){this.base(),this.configs.readonly&&(this.field.onclick=this.field.onkeydown=function(){return!1})}},{TYPE:"checkbox"}),LittleCub.controlClass(LittleCub.CheckboxControl.TYPE,LittleCub.CheckboxControl)}(),function(){"use strict";LittleCub.ListControl=LittleCub.BaseControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.options=this.configs.options||[];var a=this.configs.options,b=this,c=_.isArray(b.data),d=c&&this.schema.items?this.schema.items["enum"]:this.schema["enum"];if(d){var e=[];_.each(d,function(d,f){var g=d;LC.isEmpty(a[d])?LC.isEmpty(a[f])||(g=a[f]):g=a[d],e.push({value:d,text:g,selected:c?_.contains(b.data,d):b.data==d})}),this.configs.options=e}}})}(),function(){"use strict";LittleCub.RadioControl=LittleCub.ListControl.extend({constructor:function(a,b,c){this.base(a,b,c)},val:function(){if(this.field){var a=arguments.length;if(0==a){var b=this.field.querySelector("input[type=radio]:checked").value;return _.each(this.configs.options,function(a){String(a.value)==b&&(b=a.value)}),"number"==this.schema.type?parseFloat(b):"integer"==this.schema.type?parseInt(b):b}if(1==a){var b=arguments[0]||"";if(b!=this.val())return _.each(this.field.querySelectorAll("input[type=radio]"),function(a){a.value==b?a.checked="checked":a.removeAttribute("checked")}),this.field.querySelector("input[type=radio]:checked")||(this.field.querySelector("input[type=radio]").checked="checked"),b}}},validationEvent:function(){return this.configs.validationEvent||"click"},bindEventListeners:function(){var a=this.validationEvent(),b=this;_.each(this.field.querySelectorAll("input[type=radio]"),function(c){c.addEventListener(a,b.validate.bind(b),!1)}),this.bindCustomEventHandlers()},bindDOM:function(){this.base(),this.configs.readonly&&_.each(this.field.querySelectorAll("input[type=radio]"),function(a){a.onclick=a.onkeydown=function(){return!1}})}},{TYPE:"radio"}),LittleCub.controlClass(LittleCub.RadioControl.TYPE,LittleCub.RadioControl)}(),function(){"use strict";LittleCub.SelectControl=LittleCub.ListControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.schema.type&&"array"==this.schema.type&&(this.configs.multiple=!0)},val:function(){if(this.field){var a=arguments.length;if(0==a){var b=this.configs.multiple?[]:this.field.value,c=this;return _.each(this.configs.options,function(a,d){c.configs.multiple?c.field.options[d].selected&&String(a.value)==c.field.options[d].value&&b.push(a.value):String(a.value)==b&&(b=a.value)}),b}if(1==a){var b=arguments[0]||"";if(b!=this.val())return _.each(this.field.value,function(a){a.value==b?a.selected="selected":a.removeAttribute("selected")}),this.field.querySelector("option[selected]")||(this.field.selectedIndex=0),b}}},_validateMinItems:function(){var a={status:LC.isEmpty(this.schema.minItems)||this.val().length>=this.schema.minItems};return a.status||(a.message=LC.replaceTokens(LC.findMessage("minItems",this.configs.theme),[this.schema.minItems])),a},_validateMaxItems:function(){var a={status:LC.isEmpty(this.schema.maxItems)||this.val().length<=this.schema.minItems};return a.status||(a.message=LC.replaceTokens(LC.findMessage("maxItems",this.configs.theme),[this.schema.maxItems])),a},validate:function(){return this.validation.minItems=this._validateMinItems(),this.validation.maxItems=this._validateMaxItems(),this.base()},validationEvent:function(){return this.configs.validationEvent||"change"}},{TYPE:"select"}),LittleCub.controlClass(LittleCub.SelectControl.TYPE,LittleCub.SelectControl)}(),function(){"use strict";LittleCub.CheckboxgroupControl=LittleCub.SelectControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base()},val:function(){if(this.field){var a=arguments.length;if(0==a){var b=this.configs.multiple?[]:null;if(this.configs.multiple)b=[];else{var c=this.field.querySelector("input[type=radio]:checked");null!=c&&(b=c.value)}var d=this,e=this.field.querySelectorAll("input[type=checkbox]");return _.each(this.configs.options,function(a,c){d.configs.multiple?e[c].checked&&String(a.value)==e[c].value&&b.push(a.value):String(a.value)==b&&(b=a.value)}),b}if(1==a){var f=_.isArray(arguments[0])?arguments[0]:[arguments[0]];return _.each(f,function(a){_.each(this.field.querySelectorAll("input[type=checkbox]"),function(b){b.value==a?b.checked="checked":b.removeAttribute("checked")})}),arguments[0]}}},validationEvent:function(){return this.configs.validationEvent||"click"},bindEventListeners:function(){var a=this.validationEvent(),b=this;_.each(this.field.querySelectorAll("input[type=checkbox]"),function(c){c.addEventListener(a,b.validate.bind(b),!1)}),this.bindCustomEventHandlers()},bindDOM:function(){this.base(),this.configs.readonly&&_.each(this.field.querySelectorAll("input[type=checkbox]"),function(a){a.onclick=a.onkeydown=function(){return!1}})}},{TYPE:"checkboxgroup"}),LittleCub.controlClass(LittleCub.CheckboxgroupControl.TYPE,LittleCub.CheckboxgroupControl)}(),function(){"use strict";LittleCub.FileControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)}},{TYPE:"file"}),LittleCub.controlClass(LittleCub.FileControl.TYPE,LittleCub.FileControl)}(),function(){"use strict";LittleCub.HiddenControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.helper="",this.configs.label=""}},{TYPE:"hidden"}),LittleCub.controlClass(LittleCub.HiddenControl.TYPE,LittleCub.HiddenControl)}(),function(){"use strict";LittleCub.ArrayControl=LittleCub.ContainerControl.extend({constructor:function(a,b,c){this.base(a,b,c),this.children=[]},addChild:function(a,b){var c=this.configs,d=this.schema,e=d.items;e||(e=d.items={});var f=c.items;f||(f=c.items={});var g=LC.cloneJSON(f);e.type=LC.schemaType.call(this,e,f,a),g.type=LC.controlType.call(this,e,g),g.theme=g.theme||this.configs.theme;var h=LittleCub.controlClass(g.type),i=new h(a,g,e);return i.parent=this,i.key=(this.key?this.key:"")+"["+b+"]",i.path=this.path+"["+b+"]",i.init(),this.children.splice(b,0,i),c.controls.splice(b,0,i.configs),i},removeChild:function(a){this.children.splice(a,1),this.configs.controls.splice(a,1)},init:function(){this.base();var a=this.configs,b=this.data,c=LC.isEmpty(b)?[]:b;_.isArray(c)||(c=[c]);var d=this;a.controls=[],_.each(c,function(a,b){d.addChild(a,b)})},bindDOM:function(){this.base(),this.validate();var a=this,b=function(a){var b=document.createElement("span");return b.innerHTML=LC.renderTemplate(a.configs.theme,"array_item_toolbar",a.configs),_.each(b.querySelectorAll(".lc-array-item-add"),function(a){a.addEventListener("click",d)}),_.each(b.querySelectorAll(".lc-array-item-remove"),function(a){a.addEventListener("click",e)}),b},c=function(){var c=a.addChild(null,1),d=b(c),e=a.outerEl.querySelector(".lc-array-toolbar");return e.parentNode.insertBefore(d.firstChild,e.nextSibling),c.render(e.nextSibling,null,"insertAfter"),e.parentNode.removeChild(e),a.validate(),!1},d=function(c){var d=this,e=d.getAttribute("data-lcid");e=e.substring(0,e.length-4);var f=a.children.length-1;_.every(a.children,function(a,b){return a.id==e?(f=b,!1):!0});var g=a.children[f],h=a.addChild(null,f+1),i=b(h);return g.outerEl.parentNode.insertBefore(i.firstChild,g.outerEl.nextSibling),h.render(g.outerEl.nextSibling,null,"insertAfter"),a.updateKeyPath(),a.validate(),c.preventDefault(),!1},e=function(b){var d=this,e=d.getAttribute("data-lcid");e=e.substring(0,e.length-7);var f;if(_.every(a.children,function(a,b){return a.id==e?(f=b,!1):!0}),!LC.isEmpty(f)){var g=a.children[f],h=g.outerEl;h.parentNode.removeChild(h);var i=a.outerEl.querySelector('[data-lcid="'+e+'-toolbar"]');i.parentNode.removeChild(i),a.removeChild(f),a.updateKeyPath(),a.validate();var j=document.createEvent("Events");if(j.initEvent("lc-update",!0,!0),j["lc-control"]=a,a.outerEl.dispatchEvent(j),0==a.children.length){var k=document.createElement("span");k.innerHTML=LC.renderTemplate(g.configs.theme,"array_toolbar",g.configs,!0),_.each(k.querySelectorAll(".lc-array-add"),function(a){a.addEventListener("click",c)}),e=a.outerEl.getAttribute("data-lcid");var l=a.outerEl.querySelector("[data-lcid='"+e+"-items']");l?l.appendChild(k.firstChild):a.outerEl.appendChild(k.firstChild);var m=LC.findThemeConfig("injection",a.configs.theme);m&&_.isFunction(m)&&m.call(a,a.outerEl)}}return b.preventDefault(),!1};if(_.each(this.outerEl.querySelectorAll(".lc-array-add"),function(a){a.addEventListener("click",c)}),_.each(this.outerEl.querySelectorAll(".lc-array-item-add"),function(a){a.addEventListener("click",d)}),_.each(this.outerEl.querySelectorAll(".lc-array-item-remove"),function(a){a.addEventListener("click",e)}),this.schema.uniqueItems){var a=this;this.outerEl.addEventListener("lc-update",function(b){for(var c=b["lc-control"],d=!1,e=c.parent;e&&!d;)e==a&&(d=!0),e=e.parent;d&&a.validate()},!1)}},_updateKeyPath:function(a,b){a.parent?(a.key=a.parent.key+"["+b+"]",a.path=a.parent.path+"["+b+"]"):a.path="["+b+"]"},val:function(){var a=arguments.length;if(0==a){var b=[];return _.each(this.children,function(a){b.push(a.val())}),b}if(1==a){var b=arguments[0];return _.each(this.children,function(a,c){var d=LC.isEmpty(b)?null:b[c];
a.val(d)}),b}},bindData:function(a){this.base(a);for(var b=this.children.length,c=a.length,d=b>=c?c:b,e=0;d>e;e++)this.children[e].bindData(a[e]);if(b>=c)for(var e=c;b>e;e++)this.children.pop();else for(var e=b;c>e;e++)this.addChild(a[e],e)},_validateMinItems:function(){var a={status:LC.isEmpty(this.schema.minItems)||!_.isNumber(this.schema.minItems)||_.size(this.children)>=this.schema.minItems};return a.status||(a.message=LC.replaceTokens(LC.findMessage("minItems",this.configs.theme),[this.schema.minItems])),a},_validateMaxItems:function(){var a={status:LC.isEmpty(this.schema.minItems)||!_.isNumber(this.schema.maxItems)||_.size(this.children)<=this.schema.maxItems};return a.status||(a.message=LC.replaceTokens(LC.findMessage("maxItems",this.configs.theme),[this.schema.maxItems])),a},_validateUniqueItems:function(){var a=!0,b=this.val();if(this.schema.uniqueItems&&_.isArray(b)){for(var c=!1,d=b.length,e=0;d>e&&!c;e++)for(var f=e+1;d>f&&!c;f++)c=LC.compare(b[e],b[f]);a=!c}var g={status:a};return a||(g.message=LC.findMessage("uniqueItems",this.configs.theme)),g},validate:function(a){return this.validation.minItems=this._validateMinItems(),this.validation.maxItems=this._validateMaxItems(),this.validation.uniqueItems=this._validateUniqueItems(),this.base(a)}},{TYPE:"array"}),LittleCub.controlClass(LittleCub.ArrayControl.TYPE,LittleCub.ArrayControl)}(),function(){"use strict";LittleCub.PasswordControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)}},{TYPE:"password"}),LittleCub.controlClass(LittleCub.PasswordControl.TYPE,LittleCub.PasswordControl)}(),function(){"use strict";LittleCub.DatetimeControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validateDatetime:function(){var a=this.val(),b={status:LC.isValEmpty(this.field.value)||!_.isNaN(Date.parse(a))};return b.status||(b.message=LC.findMessage("isDatetime",this.configs.theme)),b},validate:function(){return this.validation.isDatetime=this._validateDatetime(),this.base()}},{TYPE:"datetime"}),LittleCub.controlClass(LittleCub.DatetimeControl.TYPE,LittleCub.DatetimeControl)}(),function(){"use strict";LittleCub.EmailControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validatePattern:function(){var a=this.base();return a.status||(a.message=LC.findMessage("invalidEmail",this.configs.theme)),a}},{TYPE:"email",SCHEMA:{pattern:"/^[a-z0-9!\\#\\$%&'\\*\\-\\/=\\?\\+\\-\\^_`\\{\\|\\}~]+(?:\\.[a-z0-9!\\#\\$%&'\\*\\-\\/=\\?\\+\\-\\^_`\\{\\|\\}~]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z]{2,6}$/i"}}),LittleCub.controlClass(LittleCub.EmailControl.TYPE,LittleCub.EmailControl)}(),function(){"use strict";LittleCub.HostnameControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validatePattern:function(){var a=this.base();return a.status||(a.message=LC.findMessage("invalidHostname",this.configs.theme)),a}},{TYPE:"hostname",SCHEMA:{pattern:"/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$/"}}),LittleCub.controlClass(LittleCub.HostnameControl.TYPE,LittleCub.HostnameControl)}(),function(){"use strict";LittleCub.Ipv4Control=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validatePattern:function(){var a=this.base();return a.status||(a.message=LC.findMessage("invalidIpv4",this.configs.theme)),a}},{TYPE:"ipv4",SCHEMA:{pattern:"/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/"}}),LittleCub.controlClass(LittleCub.Ipv4Control.TYPE,LittleCub.Ipv4Control)}(),function(){"use strict";LittleCub.Ipv6Control=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validatePattern:function(){var a=this.base();return a.status||(a.message=LC.findMessage("invalidIpv6",this.configs.theme)),a}},{TYPE:"ipv6",SCHEMA:{pattern:"/^([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}$/"}}),LittleCub.controlClass(LittleCub.Ipv6Control.TYPE,LittleCub.Ipv6Control)}(),function(){"use strict";LittleCub.UriControl=LittleCub.TextControl.extend({constructor:function(a,b,c){this.base(a,b,c)},init:function(){this.base(),this.configs.altTemplate="control_text"},_validateUri:function(){var a=(this.val(),{status:LC.isValEmpty(this.field.value)||!0});return a.status||(a.message=LC.findMessage("isUri",this.configs.theme)),a},validate:function(){return this.validation.isUri=this._validateUri(),this.base()}},{TYPE:"uri"}),LittleCub.controlClass(LittleCub.UriControl.TYPE,LittleCub.UriControl)}();